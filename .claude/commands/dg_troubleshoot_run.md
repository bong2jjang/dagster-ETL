# Dagster 실행 오류 진단

Dagster 실행(Run)의 오류를 요약하고 근본 원인을 분석합니다.

## 사용법

```bash
/dg_troubleshoot_run <run_id>
```

## 실행 단계

1. **로그 조회**: Dagster WebServer API 또는 로그 파일에서 해당 Run의 로그를 가져옵니다.

2. **오류 분석**: ERROR 레벨 로그를 필터링하여 다음을 확인합니다:
   - 실패한 Asset 또는 Job 이름
   - 에러 메시지 및 스택 트레이스
   - 실패 시점의 컨텍스트 (파티션, 테넌트 등)

3. **근본 원인 식별**: 일반적인 실패 패턴을 확인합니다:
   - **DB 연결 실패**: 소스 DB 접속 불가 (호스트, 포트, 인증 확인)
   - **S3 저장 실패**: MinIO/S3 연결 또는 권한 문제
   - **Trino 적재 실패**: 카탈로그/스키마 설정 또는 테이블 구조 불일치
   - **dbt 실행 실패**: SQL 에러, 모델 의존성 문제
   - **데이터 검증 실패**: 타입 불일치, NULL 제약 조건 위반
   - **메모리/타임아웃**: 대용량 데이터 처리 시 리소스 부족

4. **해결 방안 제시**:
   - 구체적인 수정 방법
   - 관련 설정 파일 경로
   - 재시도 또는 수동 실행 방법

## 출력 형식

```markdown
## 실행 오류 진단: {run_id}

**실패 Asset/Job**: [이름]
**실패 시각**: [타임스탬프]
**테넌트**: [tenant_id]

### 오류 요약
[에러 메시지의 간결한 요약]

### 근본 원인
[기술적 원인 설명]

### 해결 방안
1. [구체적인 수정 단계]
2. [필요한 설정 변경]
3. [재시도 방법]

### 관련 파일
- `etl/tenants/{tenant_id}/config.yaml` - [설정 확인 필요]
- `etl/resources/{resource}.py` - [연결 설정 확인]
```
